---
title: "Airbnb Listings in Paris, France"
author: "Tam Ly"
thanks: "Code and data are available at: [https://github.com/atn-ly/airbnb_paris_eda](https://github.com/atn-ly/airbnb_paris_eda)"
date: today
date-format: long
format: pdf
number-sections: true
---

```{r}
#| include: false
#| warning: false
#| message: false

# Load packages
library(tidyverse)
library(knitr)
library(arrow)

# Read in parquet
airbnb_data_selected <- read_parquet(here::here("data/analysis_data/2024-12-12-paris-airbnblistings-select_variables.parquet"))
```

# Introduction

In this case study we look at Airbnb listings in Paris, France, as of 12 December 2023.

# Distribution and properties of individual variables

## Distribution of prices of Paris Airbnb rentals in December 2023

We need to convert the variable from character to numeric:

```{r}
#| include: false
#| warning: false
#| message: false

airbnb_data_selected$price |>
  head()
```

```{r}
#| include: false
#| warning: false
#| message: false

airbnb_data_selected$price |>
  str_split("") |>
  unlist() |>
  unique()
```

```{r}
#| include: false
#| warning: false
#| message: false

airbnb_data_selected |>
  select(price) |>
  filter(str_detect(price, ","))
```

```{r}
#| echo: false

airbnb_data_selected <-
  airbnb_data_selected |>
  mutate(
    price = str_remove_all(price, "[\\$,]"),
    price = as.integer(price)
  )

kable(head(airbnb_data_selected$price))
```

Now we can look at the distribution of prices:

```{r}
#| echo: false
#| warning: false
#| message: false

airbnb_data_selected |>
  ggplot(aes(x = price)) +
  geom_histogram(binwidth = 10) +
  theme_classic() +
  labs(
    x = "Price per night",
    y = "Number of properties"
  )

airbnb_data_selected |>
  filter(price > 1000) |>
  ggplot(aes(x = price)) +
  geom_histogram(binwidth = 10) +
  theme_classic() +
  labs(
    x = "Price per night",
    y = "Number of properties"
  ) +
  scale_y_log10()
```

Changing the bins to be smaller:

```{r}
#| echo: false
#| warning: false
#| message: false

airbnb_data_selected |>
  filter(price < 1000) |>
  ggplot(aes(x = price)) +
  geom_histogram(binwidth = 10) +
  theme_classic() +
  labs(
    x = "Price per night",
    y = "Number of properties"
  )

airbnb_data_selected |>
  filter(price > 90) |>
  filter(price < 210) |>
  ggplot(aes(x = price)) +
  geom_histogram(binwidth = 1) +
  theme_classic() +
  labs(
    x = "Price per night",
    y = "Number of properties"
  )
```

# Distribution of review scores for Paris Airbnb rentails in December 2023

